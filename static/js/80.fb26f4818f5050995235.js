webpackJsonp([80],{QNoW:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={data:function(){return{pageInfo:{header_title:"个人认证",token:"",imgList:[{title:"标准",logo:"http://static.sxtian.com/imgs/renzheng/personal/pid_logo3.png"},{title:"边框缺失",logo:"http://static.sxtian.com/imgs/renzheng/personal/pid_logo4.png"},{title:"边框缺失",logo:"http://static.sxtian.com/imgs/renzheng/personal/pid_logo5.png"},{title:"闪光强烈",logo:"http://static.sxtian.com/imgs/renzheng/personal/pid_logo6.png"}]},rid:null,status:null,authSubmitButton:!1,authText:!1,photo_list:[{id:"files1",photo:"http://static.sxtian.com/imgs/renzheng/personal/pid_logo1.png"},{id:"files2",photo:"http://static.sxtian.com/imgs/renzheng/personal/pid_logo1.png"}],upload_file_list:["",""]}},created:function(){this.selfMainLoadOpend(),this.$store.commit("setHeaderStyle",{txt:this.pageInfo.header_title,type:1}),this.init()},beforeRouteLeave:function(t,s,i){"/newusercenter"==t.path&&(t.meta.keepAlive=!1),i()},methods:{init:function(){var t=this;this.getPageInfo(),this.__Sleep(function(s){t.selfMainLoadClosed()},1e3)},getPageInfo:function(){var t=this.getToken();this.pageInfo.token=t,this.rid=parseInt(this.getParams().rid),this.status=parseInt(this.getParams().status),0==this.status?(this.authSubmitButton=!0,this.authText=!0):this.getAuthInfo(t,this.rid)},getAuthInfo:function(t,s){var i=this.getCache("userInfoExt",2).userAuth;this.photo_list[0].photo=i.idCard,this.photo_list[1].photo=i.idCards,i&&(-1==this.status?(this._alert("您的认证信息正在审核中..."),this.authSubmitButton=!1,this.authText=!0):1==this.status&&(this._msg(i.reason),this.authSubmitButton=!1,this.authText=!1))},imports:function(t){var s=this.photo_list[t].id,i=(this.pageInfo.token,this),a=document.getElementById(""+s).files[0],e=a.name.split(".")[1],o=(a.size,new FileReader);o.readAsDataURL(a),o.onload=function(s){var a=this.result;i.photo_list[t].photo=a,i.upload(a,e,t)}},upload:function(t,s,i){var a=this,e=this.pageInfo.token,o=this.Global.baseURL+"/Tools-uploadsFileBs64.jsp",l={token:e,baseFile:t,suffix:s};this.$dialog.loading.open("正在提交请稍后..."),this.axios.post(o,l).then(function(t){1==t.data.status?(a.upload_file_list[i]=t.data.data.dir,a.$dialog.loading.close()):(a.$dialog.loading.close(),a.$dialog.toast({mes:t.data.info,timeout:1e3,icon:"error"}))})},release:function(){var t=this;if(2!=this.status){var s=this.pageInfo.token,i=this.Global.baseURL+"/Approval-addAuthentication.jsp",a=this.upload_file_list[0];a||(a=this.regSplic(this.photo_list[0].photo,1));var e=this.upload_file_list[1];if(e||(e=this.regSplic(this.photo_list[1].photo,1)),a)if(e){var o={token:s,idCard:a,idCards:e};this.$dialog.loading.open("正在认证请稍后..."),this.axios.post(i,o).then(function(s){1==s.data.status?(t.$dialog.loading.close(),t.$dialog.toast({mes:s.data.info,timeout:1500,icon:s.data.msg}),setTimeout(function(){t.$router.push("/newusercenter")},1600)):(t.$dialog.loading.close(),"-1"==s.data.code&&setTimeout(function(){t.$router.push("/login")},300))}).catch(function(s){t.$dialog.loading.close(),t.$dialog.toast({mes:"网络故障请重试...",timeout:1500,icon:"error"}),console.error(s)})}else this.$dialog.toast({mes:"请上传身份证发面照"});else this.$dialog.toast({mes:"请上传身份证正面照"})}},regSplic:function(t,s){var i=t.split(/.com/g)[1];return 1==s?i.substring(1):i}},components:{"self-alert-box":function(){return i.e(0).then(i.bind(null,"Vwbi"))}}},e={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"personal_auth w-100"},[i("div",{staticClass:"personal_auth_group w-100"},[i("ul",{staticClass:"auth_id_list w-100"},[i("li",[i("yd-cell-item",[i("span",{staticClass:"auth_id_title",attrs:{slot:"left"},slot:"left"},[t._v("请拍照并上传您的身份证照片")])])],1),t._v(" "),i("li",{staticClass:"shot_group w-100"},[i("a",{staticClass:"shot_id_item p-r",attrs:{href:"javascript:;"}},[i("div",{staticClass:"shot_img w-100"},[i("img",{attrs:{src:t.photo_list[0].photo,alt:""}})]),t._v(" "),t.authText?i("span",{staticClass:"shot_btn bg-blue fc-white fw-6"},[t._v("拍摄正面")]):t._e(),t._v(" "),t.authSubmitButton?i("input",{staticClass:"file_input",attrs:{type:"file",id:t.photo_list[0].id},on:{change:function(s){return t.imports(0)}}}):t._e()]),t._v(" "),i("a",{staticClass:"shot_id_item p-r",attrs:{href:"javascript:;"}},[i("div",{staticClass:"shot_img"},[i("img",{attrs:{src:t.photo_list[1].photo,alt:""}})]),t._v(" "),t.authText?i("span",{staticClass:"shot_btn bg-blue fc-white fw-6"},[t._v("拍摄反面")]):t._e(),t._v(" "),t.authSubmitButton?i("input",{staticClass:"file_input",attrs:{type:"file",id:t.photo_list[1].id},on:{change:function(s){return t.imports(1)}}}):t._e()])]),t._v(" "),i("li",[i("span",{staticClass:"auth_id_title",attrs:{slot:"left"},slot:"left"},[t._v("拍摄身份证要求:")])]),t._v(" "),i("li",[i("span",{staticClass:"fc-gray fs-3 fw-6",attrs:{slot:"left"},slot:"left"},[t._v("大陆公民持有的本人有效二代身份证;")])]),t._v(" "),i("li",[i("span",{staticClass:"auth_id_title",attrs:{slot:"left"},slot:"left"},[i("span",{staticClass:"fc-gray fs-3"},[t._v("拍摄时确保身份证")]),t._v(" "),i("span",{staticClass:"fc-red"},[t._v("边框完整")]),t._v(",\n\t\t\t\t\t"),i("span",{staticClass:"fc-red"},[t._v("字体清晰")]),t._v(",\n\t\t\t\t\t"),i("span",{staticClass:"fc-red"},[t._v("亮度均匀")]),t._v(";\n\t\t\t\t")])]),t._v(" "),i("li",{staticClass:"img_list"},t._l(t.pageInfo.imgList,function(s,a){return i("div",{key:a,staticClass:"img_item"},[i("img",{staticClass:"list_logo",attrs:{src:s.logo,alt:""}}),t._v(" "),i("span",{staticClass:"list_title fc-gray"},[t._v(t._s(s.title))])])}),0)])]),t._v(" "),t.authSubmitButton?i("a",{staticClass:"auth_btn btn-c bg-blue mt-2",attrs:{href:"javascript:;"},on:{click:function(s){return s.preventDefault(),t.release()}}},[i("span",{staticClass:"fc-white fw-6 fm-2"},[t._v("身份认证")])]):t._e(),t._v(" "),i("self-alert-box")],1)},staticRenderFns:[]};var o=i("VU/8")(a,e,!1,function(t){i("orJL")},null,null);s.default=o.exports},orJL:function(t,s){}});