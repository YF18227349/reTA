webpackJsonp([78],{aR8Q:function(t,e){},ghFs:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),s=i.n(n),a=i("//Fk"),o=i.n(a),l={data:function(){return{smsCode:"",code:[],pageInfo:{tel:null,strType:null,title:"",device:"",pid:0},time:59,timer:null,isDis:!0,isShowMin:!0,inputNum:"",hideinputNum:"",model:{input:""}}},created:function(){var t=this;this.getPageData().then(function(e){return new o.a(function(i,n){t.$store.commit("setHeaderStyle",{txt:t.pageInfo.title,type:1}),i(e)})}).then(function(e){if("手机登录"!=t.pageInfo.title)return t.sendTelCode(e)}).then(function(){t.countdown()})},mounted:function(){this.deBug()},methods:{_handleKeyPress:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case"D":this._handleDeleteKey();break;case"S":this._handleConfirmKey();break;default:this._handleNumberKey(e)}},_handleDeleteKey:function(){var t=this.code;if(!t.length)return!1;this.code=t.substring(0,t.length-1)},_handleNumberKey:function(t){var e=this;if(this.code.length<4){if(this.code+=t,console.log(this.code),4==this.code.length){console.log("长度满足要求，请求接口中....."),this._msg("正在登录请稍后...",300);var i,n=this.pageInfo.strType,a=this.pageInfo.tel,o=this.code;if(!o||4!=o.length)return this._msg("请输入正确验证码！");"login"==n||"getpass"==n?i={telPhone:a,code:o,type:"login",len:4,pid:this.pageInfo.pid}:"reg"==n&&(i={telPhone:a,code:o,type:"reg",len:4,pid:this.pageInfo.pid});this.__initAction("Tools-testTelCode",i,function(t,i){if(1==i){e.$dialog.loading.close();var l=t.data.token,c=t.data.id,r=t.data.rid,d=t.data.portrait,u={token:l,uid:c,rid:r,telPhone:a,location:e.Global.config.location,portrait:d};e.Global.config.uid=t.data.id,e.Global.config.token=u.token,e.setCache("user_info",s()(u)),"login"==n?setTimeout(function(){e.__Sleep(function(t){e.__Href("/")})},500):"getpass"==n?setTimeout(function(){var t={path:"/setPassWord",query:{code:o,tel:a}};e.$router.push(t)},200):"reg"==n&&setTimeout(function(){e.__Sleep(function(t){e.__Href("/personalInformation")})},200)}else e._msg(t.info),e.modelInput="",e.code=[]})}}else console.log("超出限制")},getPageData:function(){var t=this;return new o.a(function(e,i){switch(t.pageInfo.strType=t.getParams().str,t.pageInfo.tel=t.getQuery().tel,t.pageInfo.device=t.getQuery().type,t.pageInfo.pid=t.getQuery().pid,t.pageInfo.strType){case"login":t.pageInfo.title="手机登录";break;case"getpass":t.pageInfo.title="修改密码";break;case"reg":t.pageInfo.title="注册";break;default:console.log("异常")}e(t.pageInfo.strType)})},sendTelCode:function(t){var e,i=this;switch(t){case"login":case"getpass":e="havelng";break;case"reg":e="reg"}return new o.a(function(t,n){var s=i;console.log(i.pageInfo);var a={telPhone:s.pageInfo.tel,type:e,len:4,pid:i.pageInfo.pid};s.__initAction("Tools-setTelCode",a,function(e,n){1==n?t():"手机号已被注册!"==e.info?(s._msg(e.info),s.$router.back(-1)):setTimeout(function(){i.__Sleep(function(t){i.__Href("/login")})},500)})})},dologin:function(){this.model.input?this.$router.push("/PersonalInformation"):this._msg("请先输入验证码")},countdown:function(){var t=this;this.timer=setInterval(function(){t.time--,t.isDis=!1,t.time<=0&&(t.time=59,t.isShowMin=!1,t.isDis=!0,clearInterval(t.timer))},1e3)},handleIsCode:function(){var t=this;this.isDis&&(this.isShowMin=!0,this.sendTelCode().then(function(){t.countdown()}))},_handleConfirmKey:function(){var t,e=this,i=this.pageInfo.strType,n=this.pageInfo.tel,a=this.code;if(!a||4!=a.length)return this._msg("请输入正确验证码！");"login"==i||"getpass"==i?t={telPhone:n,code:a,type:"login",len:4,pid:this.pageInfo.pid}:"reg"==i&&(t={telPhone:n,code:a,type:"reg",len:4,pid:this.pageInfo.pid});this.__initAction("Tools-testTelCode",t,function(t,o){if(1==o){e.$dialog.loading.close();var l=t.data.token,c=t.data.id,r=t.data.rid,d=t.data.portrait,u={token:l,uid:c,rid:r,telPhone:n,location:e.Global.config.location,portrait:d};e.Global.config.uid=t.data.id,e.Global.config.token=u.token,e.setCache("user_info",s()(u)),"login"==i?setTimeout(function(){e.__Sleep(function(t){e.__Href("/")})},500):"getpass"==i?setTimeout(function(){var t={path:"/setPassWord",query:{code:a,tel:n}};e.$router.push(t)},200):"reg"==i&&setTimeout(function(){e.__Sleep(function(t){e.__Href("/personalInformation")})},200)}else e._msg(t.info),e.modelInput=""})},loginRun:function(){var t=this;return new o.a(function(e,i){t.__initAction("Member-login",param,function(e,i){if(1==i){t.$dialog.loading.close();var n={token:e.data.token,uid:e.data.uid,telPhone:t.hiddenTel,location:t.Global.config.location};t.Global.config.uid=n.uid,t.Global.config.token=n.token,t.setCache("user_info",s()(n)),t.setCache("userInfoExt",s()(e.data)),t._msg(e.info),setTimeout(function(){t.__Sleep(function(e){t.__Href("/")})},500)}else t._msg(e.info)})})}},watch:{modelInput:function(){var t=this.modelInput;if(!(t.length>4)){var e=t.split("");this.code=e}}},computed:{selfLogo:function(){return this.getCache("APPLOGO",2).val},hiddenTel:function(){var t=this.pageInfo.tel;return(t=""+t).replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},modelInput:{get:function(){return this.model.input},set:function(t){this.model.input=t}}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vcode bg-white w-100"},[i("div",{staticClass:"logo-top"},[i("img",{attrs:{src:t.selfLogo,alt:""}}),t._v(" "),t.isShowMin?i("p",[t._v("\n      已发送4位验证码至您的"+t._s(t.pageInfo.device)+"\n      "),i("span",[t._v(t._s(t.hiddenTel))])]):t._e(),t._v(" "),t.isShowMin?t._e():i("p",{staticStyle:{opacity:"0"}},[t._v("(o_o)")])]),t._v(" "),i("div",{staticClass:"code"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.input,expression:"model.input"}],staticClass:"input",attrs:{oninput:"if(value.length>4)value=value.slice(0, 4)",type:"number"},domProps:{value:t.model.input},on:{input:function(e){e.target.composing||t.$set(t.model,"input",e.target.value)}}}),t._v(" "),i("span",{staticClass:"inputStyle"},[t._v(t._s(t.code[0]))]),t._v(" "),i("span",{staticClass:"inputStyle"},[t._v(t._s(t.code[1]))]),t._v(" "),i("span",{staticClass:"inputStyle"},[t._v(t._s(t.code[2]))]),t._v(" "),i("span",{staticClass:"inputStyle"},[t._v(t._s(t.code[3]))])]),t._v(" "),i("div",{staticClass:"but"}),t._v(" "),i("div",{staticClass:"haveCode",on:{click:t.handleIsCode}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isShowMin,expression:"isShowMin"}]},[t._v("00:"+t._s(t.time)+"后")]),t._v(" "),i("span",{staticClass:"anginHaveCode"},[t._v(t._s(t.isShowMin?"重新":"点击")+"获取")])]),t._v(" "),i("div",{staticClass:"key-container-phone"},[i("div",{staticClass:"keyboard",on:{click:function(e){return e.stopPropagation(),t._handleKeyPress(e)}}},[i("div",{staticClass:"title"},[i("yd-icon",{staticClass:"verifycode",attrs:{name:"verifycode"}}),t._v("天安安全键盘\n      ")],1),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"key-row"},[e("div",{staticClass:"key-cell",attrs:{"data-num":"1"}},[this._v("1")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"2"}},[this._v("2")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"3"}},[this._v("3")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"key-row"},[e("div",{staticClass:"key-cell",attrs:{"data-num":"4"}},[this._v("4")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"5"}},[this._v("5")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"6"}},[this._v("6")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"key-row"},[e("div",{staticClass:"key-cell",attrs:{"data-num":"7"}},[this._v("7")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"8"}},[this._v("8")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"9"}},[this._v("9")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"key-row"},[e("div",{staticClass:"key-cell",attrs:{"data-num":"S"}},[e("i",{staticClass:"iconfont iconqueding",attrs:{"data-num":"S"}})]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"0"}},[this._v("0")]),this._v(" "),e("div",{staticClass:"key-cell",attrs:{"data-num":"D"}},[e("i",{staticClass:"iconfont iconbackspace",attrs:{"data-num":"D"}})])])}]};var r=i("VU/8")(l,c,!1,function(t){i("aR8Q")},"data-v-741e2684",null);e.default=r.exports}});