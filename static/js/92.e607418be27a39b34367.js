webpackJsonp([92],{"6GoR":function(e,t){},ghFs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),s=n("//Fk"),a=n.n(s),l={data:function(){return{smsCode:"",code:new Array(4),pageInfo:{tel:null,strType:null,title:"",device:"",pid:0},time:59,timer:null,isDis:!0,isShowMin:!0,inputNum:"",hideinputNum:"",model:{input:""}}},created:function(){var e=this;this.getPageData().then(function(t){return new a.a(function(n,i){e.$store.commit("setHeaderStyle",{txt:e.pageInfo.title,type:1}),n(t)})}).then(function(t){if("手机登录"!=e.pageInfo.title)return e.sendTelCode(t)}).then(function(){e.countdown()})},mounted:function(){this.deBug()},methods:{getPageData:function(){var e=this;return new a.a(function(t,n){switch(e.pageInfo.strType=e.getParams().str,e.pageInfo.tel=e.getQuery().tel,e.pageInfo.device=e.getQuery().type,e.pageInfo.pid=e.getQuery().pid,e.pageInfo.strType){case"login":e.pageInfo.title="手机登录";break;case"getpass":e.pageInfo.title="修改密码";break;case"reg":e.pageInfo.title="注册";break;default:console.log("异常")}t(e.pageInfo.strType)})},sendTelCode:function(e){var t,n=this;switch(e){case"login":case"getpass":t="havelng";break;case"reg":t="reg"}return new a.a(function(e,i){var o=n;console.log(n.pageInfo);var s={telPhone:o.pageInfo.tel,type:t,len:4,pid:n.pageInfo.pid};o.__initAction("Tools-setTelCode",s,function(t,i){1==i?e():"手机号已被注册!"==t.info?(o._msg(t.info),o.$router.back(-1)):setTimeout(function(){n.__Sleep(function(e){n.__Href("/login")})},500)})})},dologin:function(){this.model.input?this.$router.push("/PersonalInformation"):this._msg("请先输入验证码")},countdown:function(){var e=this;this.timer=setInterval(function(){e.time--,e.isDis=!1,e.time<=0&&(e.time=59,e.isShowMin=!1,e.isDis=!0,clearInterval(e.timer))},1e3)},handleIsCode:function(){var e=this;this.isDis&&(this.isShowMin=!0,this.sendTelCode().then(function(){e.countdown()}))},handleConfirm:function(e){var t,n=this,i=this.pageInfo.tel,s=this.modelInput;if(!s||4!=s.length)return this._msg("请输入正确验证码！");"login"==e||"getpass"==e?t={telPhone:i,code:s,type:"login",len:4,pid:this.pageInfo.pid}:"reg"==e&&(t={telPhone:i,code:s,type:"reg",len:4,pid:this.pageInfo.pid});this.__initAction("Tools-testTelCode",t,function(t,a){if(1==a){n.$dialog.loading.close();var l=t.data.token,r=t.data.id,u=t.data.rid,c=t.data.portrait,d={token:l,uid:r,rid:u,telPhone:i,location:n.Global.config.location,portrait:c};n.Global.config.uid=t.data.id,n.Global.config.token=d.token,n.setCache("user_info",o()(d)),"login"==e?setTimeout(function(){n.__Sleep(function(e){n.__Href("/")})},500):"getpass"==e?setTimeout(function(){var e={path:"/setPassWord",query:{code:s,tel:i}};n.$router.push(e)},200):"reg"==e&&setTimeout(function(){n.__Sleep(function(e){n.__Href("/personalInformation")})},200)}else n._msg(t.info),n.modelInput=""})},loginRun:function(){var e=this;return new a.a(function(t,n){e.__initAction("Member-login",param,function(t,n){if(1==n){e.$dialog.loading.close();var i={token:t.data.token,uid:t.data.uid,telPhone:e.hiddenTel,location:e.Global.config.location};e.Global.config.uid=i.uid,e.Global.config.token=i.token,e.setCache("user_info",o()(i)),e.setCache("userInfoExt",o()(t.data)),e._msg(t.info),setTimeout(function(){e.__Sleep(function(t){e.__Href("/")})},500)}else e._msg(t.info)})})}},watch:{modelInput:function(){var e=this.modelInput;if(!(e.length>4)){var t=e.split("");this.code=t}}},computed:{selfLogo:function(){return this.getCache("APPLOGO",2).val},hiddenTel:function(){var e=this.pageInfo.tel;return(e=""+e).replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},modelInput:{get:function(){return this.model.input},set:function(e){this.model.input=e}}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vcode bg-white w-100"},[n("div",{staticClass:"logo-top"},[n("img",{attrs:{src:e.selfLogo,alt:""}}),e._v(" "),e.isShowMin?n("p",[e._v("\n\t\t\t已发送4位验证码至您的"+e._s(e.pageInfo.device)+"\n\t\t\t"),n("span",[e._v(e._s(e.hiddenTel))])]):e._e(),e._v(" "),e.isShowMin?e._e():n("p",{staticStyle:{opacity:"0"}},[e._v("(o_o)")])]),e._v(" "),n("div",{staticClass:"code"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.input,expression:"model.input"}],staticClass:"input",attrs:{oninput:"if(value.length>4)value=value.slice(0, 4)",type:"number"},domProps:{value:e.model.input},on:{input:function(t){t.target.composing||e.$set(e.model,"input",t.target.value)}}}),e._v(" "),n("span",{staticClass:"inputStyle"},[e._v(e._s(e.code[0]))]),e._v(" "),n("span",{staticClass:"inputStyle"},[e._v(e._s(e.code[1]))]),e._v(" "),n("span",{staticClass:"inputStyle"},[e._v(e._s(e.code[2]))]),e._v(" "),n("span",{staticClass:"inputStyle"},[e._v(e._s(e.code[3]))])]),e._v(" "),n("div",{staticClass:"but"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleConfirm(e.pageInfo.strType)}}},[e._v("确认")])]),e._v(" "),n("div",{staticClass:"haveCode",on:{click:e.handleIsCode}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowMin,expression:"isShowMin"}]},[e._v("00:"+e._s(e.time)+"后")]),e._v(" "),n("span",{staticClass:"anginHaveCode"},[e._v(e._s(e.isShowMin?"重新":"点击")+"获取")])])])},staticRenderFns:[]};var u=n("VU/8")(l,r,!1,function(e){n("6GoR")},"data-v-53f73797",null);t.default=u.exports}});